(self["webpackChunkiristravel"]=self["webpackChunkiristravel"]||[]).push([[676],{6676:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"login absolute top-1/2 w-100"},[a("div",{staticClass:"w-20 mx-auto my-5"},[e._m(0),a("form",{staticClass:"flex flex-col text-white gap-y-4"},[a("div",{staticClass:"flex flex-col items-start gap-y-1"},[a("label",{staticClass:"pl-2",attrs:{for:"user"}},[e._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.user,expression:"user"}],staticClass:"bg-transparent border-2 w-full rounded-4xl text-xl px-2",attrs:{type:"text",id:"user",name:"user"},domProps:{value:e.user},on:{input:function(t){t.target.composing||(e.user=t.target.value)}}})]),a("div",{staticClass:"relative flex flex-col items-start gap-y-1"},[a("label",{staticClass:"pl-2",attrs:{for:"pass"}},[e._v("Contreña")]),"checkbox"===(e.showpass?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],staticClass:"bg-transparent border-2 w-full rounded-4xl text-xl px-2",attrs:{id:"pass",name:"pass",type:"checkbox"},domProps:{checked:Array.isArray(e.pass)?e._i(e.pass,null)>-1:e.pass},on:{change:function(t){var a=e.pass,s=t.target,r=!!s.checked;if(Array.isArray(a)){var n=null,i=e._i(a,n);s.checked?i<0&&(e.pass=a.concat([n])):i>-1&&(e.pass=a.slice(0,i).concat(a.slice(i+1)))}else e.pass=r}}}):"radio"===(e.showpass?"text":"password")?a("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],staticClass:"bg-transparent border-2 w-full rounded-4xl text-xl px-2",attrs:{id:"pass",name:"pass",type:"radio"},domProps:{checked:e._q(e.pass,null)},on:{change:function(t){e.pass=null}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],staticClass:"bg-transparent border-2 w-full rounded-4xl text-xl px-2",attrs:{id:"pass",name:"pass",type:e.showpass?"text":"password"},domProps:{value:e.pass},on:{input:function(t){t.target.composing||(e.pass=t.target.value)}}}),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.showpass,expression:"!showpass"}],staticClass:"absolute top-2rem right-1rem",attrs:{type:"button"},on:{click:function(t){e.showpass=!e.showpass}}},[a("i",{staticClass:"fas fa-eye-slash"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.showpass,expression:"showpass"}],staticClass:"absolute top-2rem right-1rem",attrs:{type:"button"},on:{click:function(t){e.showpass=!e.showpass}}},[a("i",{staticClass:"fas fa-eye"})])]),a("div",{staticClass:"flex flex-col items-center gap-y-3"},[a("small",{directives:[{name:"show",rawName:"v-show",value:e.is_error,expression:"is_error"}],staticClass:"text-red py-1"},[e._v(e._s(e.error_message))]),a("router-link",{staticClass:"text-lightBlue underline",attrs:{to:{name:"ForgotPassword"}}},[e._v("Olvide mi contraseña")]),a("button",{staticClass:"border border-orange bg-orange rounded-3xl py-2 px-16",attrs:{type:"submit"},on:{click:e.login}},[e._v("Iniciar sesión")])],1)])])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("figure",{staticClass:"flex py-4"},[s("img",{staticClass:"w-4/5 m-auto",attrs:{src:a(7038),alt:"logo"}})])}],n=a(7906),i=a(6198),o=a(23),c=a(1105),l={name:"LoginForm",data:function(){return{user:"",pass:"",showpass:!1,disabledLogin:!1,is_error:!1,error_message:"Mensaje de error"}},created:function(){o.Z.isClientLogged()&&this.$router.push({name:"Dashboard"})},methods:{login:function(e){var t=this;return(0,i.Z)((0,n.Z)().mark((function a(){return(0,n.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.preventDefault(),t.disabledLogin||c.Z.login(t.user,t.pass).then((function(e){e.logged?(t.$router.push({name:"Dashboard"}),console.log("User is logged!!!")):(t.error_message=e.message,t.is_error=!0,setTimeout((function(){t.is_error=!1}),3e3))}));case 2:case"end":return a.stop()}}),a)})))()}}},u=l,p=a(1001),d=(0,p.Z)(u,s,r,!1,null,"4bd663aa",null),v=d.exports},7207:function(e){var t=TypeError,a=9007199254740991;e.exports=function(e){if(e>a)throw t("Maximum allowed index exceeded");return e}},2222:function(e,t,a){"use strict";var s=a(2109),r=a(7293),n=a(3157),i=a(111),o=a(7908),c=a(6244),l=a(7207),u=a(6135),p=a(5417),d=a(1194),v=a(5112),f=a(7392),m=v("isConcatSpreadable"),g=f>=51||!r((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),h=d("concat"),x=function(e){if(!i(e))return!1;var t=e[m];return void 0!==t?!!t:n(e)},w=!g||!h;s({target:"Array",proto:!0,arity:1,forced:w},{concat:function(e){var t,a,s,r,n,i=o(this),d=p(i,0),v=0;for(t=-1,s=arguments.length;t<s;t++)if(n=-1===t?i:arguments[t],x(n))for(r=c(n),l(v+r),a=0;a<r;a++,v++)a in n&&u(d,v,n[a]);else l(v+1),u(d,v++,n);return d.length=v,d}})},7327:function(e,t,a){"use strict";var s=a(2109),r=a(2092).filter,n=a(1194),i=n("filter");s({target:"Array",proto:!0,forced:!i},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},1105:function(e,t,a){"use strict";var s=a(7965),r=a(7906),n=a(6198),i=(a(2222),a(8309),a(7327),a(1539),a(23)),o={login:function(e,t){return(0,n.Z)((0,r.Z)().mark((function a(){var s,n,o;return(0,r.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,t=i.Z.encryptPass(t),a.next=4,i.Z.checkLogin("/clients/login?email=".concat(e,"&password=").concat(t),{auth:"bearer"});case 4:if(s=a.sent,n=s.status,o=s.data,200!=n){a.next=13;break}return sessionStorage.setItem("token",o.token),i.Z.createLocalUserData(),a.abrupt("return",{message:"Success!!!",error:!1,logged:!0});case 13:if(400!=n){a.next=17;break}return a.abrupt("return",{message:o.message,error:!0,logged:!1});case 17:console.log("Poblemas al loguearse");case 18:a.next=23;break;case 20:a.prev=20,a.t0=a["catch"](0),console.log(a.t0);case 23:case"end":return a.stop()}}),a,null,[[0,20]])})))()},getList:function(){var e=this;try{return i.Z.checkLogin("/clients").then((function(t){var a=[];if(200==t.status)if(i.Z.validateRole(["ROLE_Admin"])){var r,n=(0,s.Z)(t.data);try{for(n.s();!(r=n.n()).done;){var o=r.value;a.push({id:o.id,name:o.name,email:o.email,active:!!o.active,verify:!!o.verify,agent:!!o.agent})}}catch(p){n.e(p)}finally{n.f()}}else if(i.Z.validateRole(["ROLE_Comercial"])){var c,l=(0,s.Z)(t.data);try{for(l.s();!(c=l.n()).done;){var u=c.value;u.email==localStorage.getItem("email")&&a.push({id:u.id,name:u.name,email:u.email,active:!!u.active,verify:!!u.verify,agent:!!u.agent})}}catch(p){l.e(p)}finally{l.f()}}else i.Z.validateRole(["ROLE_Agency"])&&(a=e.validateRoleUser(t.data));return a}))}catch(t){console.log(t)}},addUpdClient:function(e){var t=arguments;return(0,n.Z)((0,r.Z)().mark((function a(){var s,n,o,c;return(0,r.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=!(t.length>1&&void 0!==t[1])||t[1],a.prev=1,e.password=i.Z.encryptPass(e.password),e.auth="bearer",!s){a.next=10;break}return a.next=7,i.Z.checkLogin("/clients/create",e,"post");case 7:a.t0=a.sent,a.next=13;break;case 10:return a.next=12,i.Z.checkLogin("/clients/upd",e,"put");case 12:a.t0=a.sent;case 13:if(n=a.t0,o=n.status,c=n.data,200!=o){a.next=18;break}return a.abrupt("return",c);case 18:a.next=23;break;case 20:a.prev=20,a.t1=a["catch"](1),console.log(a.t1.response);case 23:return a.abrupt("return",!1);case 24:case"end":return a.stop()}}),a,null,[[1,20]])})))()},getClient:function(e){return(0,n.Z)((0,r.Z)().mark((function t(){var a,s,n;return(0,r.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.Z.checkLogin("/clients/".concat(e),{auth:"bearer"});case 3:if(a=t.sent,s=a.status,n=a.data,200!=s){t.next=8;break}return t.abrupt("return",n);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0.response);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},delete:function(e){var t=this;return(0,n.Z)((0,r.Z)().mark((function a(){var s,n,o;return(0,r.Z)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={auth:"bearer",ids:e},a.prev=1,a.next=4,i.Z.checkLogin("/clients/delete",s,"post");case 4:if(n=a.sent,o=n.status,n.data,200!=o){a.next=9;break}return a.abrupt("return",t.getList().then((function(e){return e})));case 9:a.next=14;break;case 11:a.prev=11,a.t0=a["catch"](1),
//! Fail 
console.log(a.t0.response);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})))()},validateRoleUser:function(e){var t=localStorage.getItem("email"),a=e.filter((function(e){return e.email==t})),r=[];r.push({id:a[0].id,name:a[0].name,email:a[0].email,active:!!a[0].active,verify:!!a[0].verify,agent:!!a[0].agent,vendor:!1});var n,i=(0,s.Z)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;a[0].id==o.parent&&r.push({id:o.id,name:o.name,email:o.email,active:!!o.active,verify:!!o.verify,agent:!!o.agent,vendor:!0})}}catch(c){i.e(c)}finally{i.f()}return r}};t["Z"]=o}}]);
//# sourceMappingURL=676-legacy.33950b11.js.map